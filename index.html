<!DOCTYPE html>
<html lang="fr" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Codaris — Agence Web</title>
  <meta name="description" content="Codaris crée des sites modernes et animés qui convertissent."/>
  <link href="https://fonts.googleapis.com/css2?family=Sora:wght@400;600;700&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />
  <script>document.documentElement.classList.add('js')</script>
  <style>html,body{max-width:100%;overflow-x:hidden}</style>
</head>
<body>

  <!-- HEADER / NAVBAR -->
  <header class="site-header">
    <nav class="nav container">
      <a href="#hero" class="logo" aria-label="Codaris">
        <img src="images/codaris-logo.png" alt="Codaris" class="logo__img">
        <span class="logo__word">codaris</span>
      </a>

      <button class="burger" id="burger" aria-label="Menu">
        <span></span><span></span><span></span>
      </button>

      <!-- Overlay menu lives here -->
      <ul class="nav__links" id="navLinks" aria-hidden="true">
        <li><a class="nav__link" href="#services">Services</a></li>
        <li><a class="nav__link" href="#work">Nos travaux</a></li>
        <li><a class="nav__link" href="#process">Process</a></li>
        <li><a class="nav__link" href="#contact">Contact</a></li>
        <li class="nav__mobile-actions">
          <a href="#contact" class="btn primary large">Demander un devis</a>
        </li>
      </ul>

      <div class="nav__actions">
        <a href="#contact" class="btn primary">Demander un devis</a>
      </div>
    </nav>
  </header>

  <!-- HERO -->
  <section id="hero" class="hero container-bleed">
    <!-- carrelage visible desktop + mobile -->
    <div class="tiles" aria-hidden="true"></div>
    <div class="hero__content">
      <h1 class="hero__title">Des sites modernes, qui convertissent</h1>
      <div class="hero__ctas">
        <a href="#contact" class="btn primary big">Demander un devis</a>
        <a href="#work" class="btn ghost big">Voir nos travaux</a>
      </div>
    </div>
  </section>

  <!-- SERVICES -->
  <section id="services" class="section">
    <div class="container">
      <header class="section__head">
        <h2 class="section__title">Services</h2>
        <p class="section__kicker">Du concept à la mise en ligne.</p>
      </header>

      <!-- Grille desktop -->
      <div id="servicesList" class="grid four">
        <article class="svc card"><h3>Design</h3><p>UI/UX, maquettes Figma, identité visuelle.</p></article>
        <article class="svc card"><h3>Développement</h3><p>Sites vitrines rapides, e-commerce, animations.</p></article>
        <article class="svc card"><h3>Motion</h3><p>Micro-interactions, transitions, carrousels fluides.</p></article>
        <article class="svc card"><h3>Maintenance</h3><p>Mises à jour, optimisation, accompagnement.</p></article>
      </div>

      <!-- Carrousel mobile (rempli par JS) -->
      <div id="servicesCarousel" class="svc-carousel" aria-label="Carrousel services" hidden>
        <div class="svc-track"></div>
      </div>
    </div>
  </section>

  <!-- WORK / CAROUSEL -->
  <section id="work" class="section">
    <div class="container">
      <header class="section__head">
        <h2 class="section__title">Nos travaux</h2>
        <p class="section__kicker">Sélection de projets en défilement continu.</p>
      </header>

      <div class="marquee" aria-label="Carousel projets">
        <div class="track" id="workTrack"></div>
      </div>
    </div>
  </section>

  <!-- PROCESS / TIMELINE -->
  <section id="process" class="section">
    <div class="container">
      <header class="section__head">
        <h2 class="section__title">Process</h2>
        <p class="section__kicker">Un parcours clair, animé et efficace.</p>
      </header>

      <div class="timeline-h" id="timeline">
        <div class="tl-bar" aria-hidden="true"><span class="tl-progress"></span></div>
        <ul class="tl-steps">
          <li class="step"><span class="dot">1</span><span class="label">Découverte</span></li>
          <li class="step"><span class="dot">2</span><span class="label">Design</span></li>
          <li class="step"><span class="dot">3</span><span class="label">Développement</span></li>
          <li class="step"><span class="dot">4</span><span class="label">Livraison</span></li>
          <li class="step"><span class="dot">5</span><span class="label">Suivi</span></li>
        </ul>
      </div>
    </div>
  </section>

  <!-- CONTACT -->
  <section id="contact" class="section">
    <div class="container grid two contact">
      <div class="contact__panel">
        <h2 class="section__title">Contact</h2>
        <p class="small">Réponse rapide sous 24h.</p>
        <ul class="contact__list">
          <li><a href="mailto:hello@codaris.agency">hello@codaris.agency</a></li>
          <li><a href="tel:+33600000000">+33 6 00 00 00 00</a></li>
        </ul>
      </div>

      <form id="contactForm" class="form">
        <div class="field">
          <label for="name" class="small">Nom</label>
          <input id="name" type="text" placeholder="Votre nom" required />
        </div>
        <div class="field">
          <label for="email" class="small">Email</label>
          <input id="email" type="email" placeholder="adresse@mail.com" required />
        </div>
        <div class="field">
          <label for="message" class="small">Message</label>
          <textarea id="message" rows="6" placeholder="Parlez-nous de votre projet" required></textarea>
        </div>
        <button class="btn primary" type="submit">Envoyer</button>
        <p id="formStatus" class="small muted" role="status" aria-live="polite"></p>
      </form>
    </div>
  </section>

  <footer class="site-footer">
    <div class="container">
      <p class="small">© <span id="y"></span> Codaris</p>
    </div>
  </footer>

  <!-- EmailJS (CDN) -->
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

  <!-- APP JS -->
  <script>
    const $ = s => document.querySelector(s);

    // Year
    $('#y').textContent = new Date().getFullYear();

    // ===== Burger menu (overlay full-screen + pointer-events fix) =====
    const burger = document.getElementById('burger');
    const navLinks = document.getElementById('navLinks');

    burger.addEventListener('click', ()=>{
      const open = navLinks.classList.toggle('open');
      burger.classList.toggle('active', open);
      navLinks.setAttribute('aria-hidden', open ? 'false' : 'true');
      document.body.style.overflow = open ? 'hidden' : '';
    });

    navLinks.querySelectorAll('a').forEach(a =>
      a.addEventListener('click', ()=>{
        navLinks.classList.remove('open');
        burger.classList.remove('active');
        navLinks.setAttribute('aria-hidden', 'true');
        document.body.style.overflow = '';
      })
    );

    // ===== HERO Tiles (desktop + mobile) =====
    (function initTiles(){
      const wrap = document.querySelector('.tiles');
      function build(){
        wrap.innerHTML = '';
        const size = parseInt(getComputedStyle(wrap).getPropertyValue('--size')) || 80;
        const rect = wrap.getBoundingClientRect();
        const cols = Math.ceil(rect.width / size);
        const rows = Math.ceil(rect.height / size);
        const frag = document.createDocumentFragment();
        for(let i=0;i<cols*rows;i++){
          const tile = document.createElement('div');
          tile.className = 'tile';
          tile.addEventListener('mousemove',(e)=>{
            tile.style.setProperty('--mx', e.offsetX+'px');
            tile.style.setProperty('--my', e.offsetY+'px');
          });
          frag.appendChild(tile);
        }
        wrap.appendChild(frag);
      }
      build();
      window.addEventListener('resize', () => { clearTimeout(wrap._t); wrap._t=setTimeout(build,120); });
    })();

    // ===== PROJETS CAROUSEL (auto + manuel) =====
    const PROJECTS = [
      { title: "Blizz’art", href: "./Blizz%27Art/index.html", img: "./Blizz%27Art/blizzart_homepage.png", caption: "Plateforme artistique" },
      { title: "iSave", href: "./iSave/index.html", img: "./iSave/isave_homepage.png", caption: "Association engagée" },
      { title: "Tempo Fitness", href: "./tempo_fitness/index.html", img: "./tempo_fitness/images/tempo-homepage.png", caption: "Club de sport" },
      { title: "Têtàtêtes", href: "./tetatetes/index.html", img: "./tetatetes/tetatetes_homepage.png", caption: "Magazine culturel" }
    ];
    (function renderProjectsAndRunMarquee() {
      const track = document.getElementById('workTrack');
      if(!track) return;
      track.innerHTML = PROJECTS.map(p => `
        <a href="${p.href}" class="slide" target="_blank" rel="noopener">
          <div class="slide__img"><img src="${p.img}" alt="${p.title} — ${p.caption}"></div>
          <div class="slide__txt">${p.title} — ${p.caption}</div>
        </a>`).join('');
      track.innerHTML += track.innerHTML; // duplication

      let x = 0, speed = 0.9, playing = true;
      function step(){
        if(playing){
          x -= speed;
          const half = track.scrollWidth / 2;
          if (Math.abs(x) >= half) x = 0;
          track.style.transform = `translateX(${x}px)`;
        }
        requestAnimationFrame(step);
      }
      step();

      ['mouseenter','touchstart','pointerdown'].forEach(evt => track.addEventListener(evt, ()=> playing=false, {passive:true}));
      ['mouseleave','touchend','pointerup','pointercancel'].forEach(evt => track.addEventListener(evt, ()=> playing=true, {passive:true}));
    })();

    // ===== Services → carrousel mobile (auto + manuel) =====
    (function servicesCarousel(){
      const list = document.getElementById('servicesList');
      const carousel = document.getElementById('servicesCarousel');
      const track = carousel.querySelector('.svc-track');

      function toCarousel(){
        const cards = Array.from(list.querySelectorAll('.svc.card'));
        track.innerHTML = cards.map(c => `<article class="svc card">${c.innerHTML}</article>`).join('');
        track.innerHTML += track.innerHTML; // boucle

        list.hidden = true;
        carousel.hidden = false;

        let playing = true;
        const speed = 0.5;
        function auto(){
          if(playing){
            carousel.scrollLeft += speed;
            if(carousel.scrollLeft + carousel.clientWidth >= carousel.scrollWidth - 2){
              carousel.scrollLeft = 0;
            }
          }
          requestAnimationFrame(auto);
        }
        auto();

        ['mouseenter','touchstart','pointerdown'].forEach(evt => carousel.addEventListener(evt, ()=> playing=false, {passive:true}));
        ['mouseleave','touchend','pointerup','pointercancel'].forEach(evt => carousel.addEventListener(evt, ()=> playing=true, {passive:true}));
      }

      function toGrid(){
        carousel.hidden = true;
        list.hidden = false;
      }

      const mql = window.matchMedia('(max-width: 780px)');
      function apply(e){ e.matches ? toCarousel() : toGrid(); }
      apply(mql); mql.addEventListener('change', apply);
    })();

    // ===== Timeline progress (horiz desktop / vert mobile) =====
    (function timeline(){
      const tl = document.getElementById('timeline');
      const progress = tl.querySelector('.tl-progress');
      function update(){
        const r = tl.getBoundingClientRect();
        const vh = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        const vertical = window.matchMedia('(max-width: 780px)').matches;
        if(vertical){
          const total = r.height;
          const visible = Math.min(total, Math.max(0, (vh/2) - r.top));
          const ratio = Math.min(1, Math.max(0, visible / total));
          progress.style.transform = `scaleY(${ratio})`;
        }else{
          const visible = Math.min(1, Math.max(0, (vh - r.top) / (vh + r.height)));
          progress.style.transform = `scaleX(${visible})`;
        }
      }
      update();
      window.addEventListener('scroll', update, {passive:true});
      window.addEventListener('resize', update);
    })();

    // EmailJS (facultatif)
    const EMAILJS_PUBLIC_KEY = "JlVPdGZfHPDni3Yyp";
    const EMAILJS_SERVICE_ID = "service_a2gwgj2";
    const EMAILJS_TEMPLATE_ID = "template_ijfo9ig";
    if(window.emailjs){ emailjs.init(EMAILJS_PUBLIC_KEY); }
    $('#contactForm').addEventListener('submit', async (e)=>{
      e.preventDefault();
      const status = document.getElementById('formStatus');
      status.textContent = "Envoi...";
      try{
        await emailjs.send(EMAILJS_SERVICE_ID, EMAILJS_TEMPLATE_ID, {
          from_name: document.getElementById('name').value,
          reply_to: document.getElementById('email').value,
          message: document.getElementById('message').value
        });
        status.textContent = "Message envoyé. Merci !";
        e.target.reset();
      }catch(err){
        status.textContent = "Erreur d’envoi.";
      }
    });
  </script>
</body>
</html>


